# Курс основ программирования на МКН СПбГУ

## Проект 2: key-value база данных

[Постановка задачи](./TASK.md)

# Особенности
+ Ограничение на размер key - 16B
+ Запрещен нулевой байт в строке ключа и значения
+ Обрабатывается нижний регистр команд
+ Отдельный файл с значениями ключей, соотвественно база - папка с индексированным .db и values.db файлами


# Добавить
+ `DELETE` и `ADD` сделать через блочное смещение байтов
+ Создавать папку с индексированным файлом и файлом значений
+ Запретить название values.db и ограничить символы на название БД, exit code в обоих случаях - INVALID_DB_NAME

# Commands

| Команда    | Описание                |
| ---------- | ---------------------   |
|` CREATE`   | Создание базы данных    |
| `DROP`     | Удаление базы данных    |
| `ADD`      | Вставка данных          |
| `GET`      | Получение данных        |
| `UPDATE`   | Изменение данных        |
| `DELETE`   | Удаление данных         |

# Run & Test Application

## Run

### Операции `CREATE` и `DROP`
```
main.kt <path db> <command>
```

### Операции `ADD` и `UPDATE`
```
main.kt <path db> <command> <key> <value>
```

### Операции `GET` и `DELETE`
```
main.kt <path db> <command> <key>
```

## Test

Запустить скрипт `Tests.kt`

### Exit codes

| Название            | Exit code | Описание                   |
| ----------          | --------- | -------------------------- |
| SUCCESS             | 0         | Операция прошла успешно    |
| HELP                | 1         | Неправильный ввод          |
| INVALID_DB          | 2         | Неправильный путь к БД     |
| INVALID_KEY         | 3         | Ключ отсутствует           |
| KEY_SIZE_EXCEEDED   | 4         | Превышен размер ключа      |
| INVALID_STRING      | 5         | Не корректная строка       |
| DB_ALREADY_EXISTS   | 6         | Файл уже существует        |
| KEY_ALREADY_EXISTS  | 7         | Ключ уже существует        |

